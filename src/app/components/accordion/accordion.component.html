<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CLICK MODE: Project cards via ng-content
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
@if (mode() === 'click') {
<ng-content />
}

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCROLL MODE: Data-driven cards with scroll animation
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
@if (mode() === 'scroll') {
<section class="scroll-section" [style.height]="sectionHeight()" [style.--sa-font]="fontFamily()">
    <div class="sticky-wrapper">
        @if (sectionTitle() || sectionSubtitle()) {
        <div class="section-header">
            <div class="title-with-brackets">
                <span class="bracket">[</span>
                @if (sectionTitle()) { <h2 class="section-title">{{ sectionTitle() }}</h2> }
                <span class="bracket">]</span>
            </div>
            @if (sectionSubtitle()) { <p class="section-subtitle">{{ sectionSubtitle() }}</p> }
        </div>
        }
        <div class="scroll-cards-container" [style.width]="currentWidth" [style.gap]="gap()"
            [style.--sa-radius]="borderRadius()" [style.--sa-text-color]="textColor()">

            @for (card of cards(); track card.title; let i = $index) {
            <div class="scroll-card" [class.expanded]="expandedScrollCard() === i"
                [class.collapsed]="expandedScrollCard() !== i" [class.no-expanded]="expandedScrollCard() === -1"
                [style.opacity]="0.6 + (0.4 * expansionProgress())" (click)="toggleScrollCard(i)">

                <!-- Title shown vertically when collapsed -->
                <div class="vertical-title">{{ card.title }}</div>

                <div class="card-content" [class.card-content-with-map]="card.markers?.length || card.images?.length">
                    <!-- Left column: text & actions -->
                    <div class="card-text-col" (click)="$event.stopPropagation()">
                        @if (card.icon) {
                        <div class="scroll-card-icon">{{ card.icon }}</div>
                        }
                        <h2>{{ card.title }}</h2>
                        <p class="scroll-card-description">{{ card.description }}</p>

                        @if (card.prompt || card.llmLinks?.length) {
                        <div class="actions-wrapper">
                            <!-- Prompt copy section -->
                            @if (card.prompt) {
                            <div class="prompt-section">
                                <span class="scroll-card-description">First, copy the prompt:</span>
                                <button class="copy-btn" (click)="copyPrompt(card.prompt!, $event)">
                                    @if (copied()) {
                                    <span class="copy-icon">âœ“</span> Copied!
                                    } @else {
                                    <span class="copy-icon">ðŸ“‹</span> Copy prompt
                                    }
                                </button>
                            </div>
                            }

                            <!-- LLM links section -->
                            @if (card.llmLinks?.length) {
                            <div class="llm-section">
                                <span class="scroll-card-description">Then, check on the different LLMs:</span>
                                <div class="llm-buttons">
                                    @for (link of card.llmLinks; track link.label) {
                                    <button class="llm-btn" (click)="openLlmLink(link.url, $event)">
                                        {{ link.label }}
                                    </button>
                                    }
                                </div>
                            </div>
                            }
                        </div>
                        }

                        <!-- Testimonials section -->
                        @if (card.testimonials?.length) {
                        <div class="testimonials-section">
                            <span class="scroll-card-description testimonials-title">Testimonials:</span>
                            @for (testimonial of card.testimonials; track testimonial.name) {
                            <div class="testimonial-item">
                                <div class="testimonial-author">{{ testimonial.name }} <span
                                        class="testimonial-role">({{ testimonial.role }})</span></div>
                                <p class="testimonial-quote">{{ testimonial.quote }}</p>
                            </div>
                            }
                        </div>
                        }
                    </div>

                    <!-- Right column: visuals (map or images) -->
                    @if (card.markers?.length || card.images?.length) {
                    <div class="card-visual-col" (click)="expandedScrollCard() === i ? $event.stopPropagation() : null">
                        @if (card.markers?.length) {
                        <app-interactive-map [markers]="card.markers!" />
                        }

                        @if (card.images?.length) {
                        <div [class]="'images-stack ' + (card.imagesStackClass || '')">
                            @for (img of card.images; track img.src) {
                            <img [src]="img.src" [alt]="img.alt" [class.is-overlay]="img.isOverlay"
                                [class]="img.class || ''">
                            }
                        </div>
                        }
                    </div>
                    }
                </div>
            </div>
            }
        </div>
    </div>
</section>
}